~8.4
엔진 준비
리소스 확인(캐릭터 확인, 사운드 확인)



~8.11
맵 에디터, 튜토리얼맵

~8.18
캐릭터 구현(애니메이션), 몬스터

~8.25
사운드, 보스



화- 
수 - 리팩,사운드

타이틀, 맵(1,2)
설정
몬스터, 이펙트
튜토리얼UI, 맵트리거




이펙트,대사(스크립트)출력,튜토리얼UI
타이틀,엔딩,씬페이더,



클래스





플레이어
 와이어(1클릭 2클릭)
   1클릭
	몬스터
	벽(플레이어 무게중심을 와이어로 변경)
	안닿았을때
	
   2클릭
	몬스터 위로 이동하고 제압상태
	벽에 걸린 와이어을 해제
	
 스페이스바(일반점프, 벽에 붙어있을때, 와이어 걸려있을 때)
 좌우(일반, 와이어 걸려있을 때)
 상하(일반(거의 안쓰일듯?), 벽에 붙어있을때)
 쉬프트(피격했을때(0.5초 이내), 와이어 걸려있을 때)
 

몬스터
 일반
 경계(일반과 통합할수도)
 조준
 사격
 제압



1. 백그라운드 (미세하게움직임 전체맵인데 원근감 사용)
2. 백그라운드2 (콜라이더 없는 그냥 그림) 
   (1,2,3을 나눠야 하나?)
3. 벽(사실상 백그라운드3) 다만 콜라이더 지정이 있음
	- 와이어를 걸거나 탈 수 있는 벽
	- 불가능한 벽
	- 닿으면 데미지를 입는 벽
	- 즉사하는 영역
4. 블록이나 충돌오브젝트(콜라이더가 존재하고 부가기능들이 붙어있음)
	-이동불가에 트리거 역할을 하는 충돌오브젝트(발전소등)(붙잡기)
	-플레이어가 타면 이동하는 블럭(붙잡기)
	-버튼 누르면 자동으로 이동하는 블럭
	-플레이어나 와이어와 접촉중이면 이동하는 블럭(주로 중력)

5. 충돌블록(알파블랜드)
	- 3번과 매우 흡사함 다만 블랜드 순서상 미뤄놨는데 3번으로도 옮겨보자
	-그룹타입 지정만 모드에서 해준다면 알아서 미뤄질듯
	-이럴경우 블록으로 처리하는게 아니라 1,2,3과 같이 타일로 처리

1,2는 그냥 순서대로 그리면 된다 필요한건 맵을 불러와서 페이지를 넘기며 
찍어내는 툴과 여러 제작재료들이 모여있는 텍스쳐
그리고 만약 1,2,를 나눈다면 백그라운드1,2를 오가는 모드

3은 모드를 지정해야 한다. 콜라이더 지정 모드를 하면
누른 블럭은 지정한 콜라이더를 생성하게끔(그룹타입만 바꾸면 될듯?)

4번은 프리팹과 트리거를 생성하는 식으로 해야 할듯



 





1번계획
1,2,3,5를 묶어서 작업하는 방식
그룹지정을 크게는 3개로 나누는 방식이고
작게는 
1,2를 BACKGORUND(TILE)로
3번을
	GROUND
	NONEGROUND
	DAMAGED
	DEADZONE
 5는 뭐 따로 지정 ALPHAGROUND 같은걸로

툴에서 텍스쳐 지정, 그룹타입 지정이 가능해야 함

그룹타입에 따라서 로드할때 
콜라이더 생성 여부나
타일을 바꿔서 생성한다거나 하는
식으로 사용





2번계획
그룹지정을 타일로 다 묶어 버리고 Name만 다르게 주는 방법
이 방법을 채택하면 플레이어와 타일을 충돌처리 해야하는데
충돌이 굉장히 많이 발생할 수 있음

장점은 구현이 제일 빠름

방법은 툴에서 텍스쳐 지정, Name 지정
콜라이더 생성 여부
타일 바꾸기



3번
그룹목록에서 타일 말고 충돌할 녀석 하나 만들고
그 충돌그룹에다 네임을 세부적으로 넣어서 관리
1,2 번의 절충안







수정해야 할 파일들
씬cpp에 Render_Tile(dc)
	-해당씬에서 그룹타입이 타일인 오브젝트들을 불러와서
	 렌더링하는 함수

	CreateTile(씬의 x 타일 개수,y타일 개수)
	-시작할때 Tile 그룹을 전부 지우고 시작
	 텍스쳐를 받아와서
	(경로 하나만 받아오는데 원리를 모르겠음 여러개 받아야 하지 않나?)
	씬의 x,y타일 개수만큼 반복문을 돌리면서
	포지션을 지정과 동시에 그룹타입 타일에다 Add오브젝트


	LoadTile(상대경로)
	파일 첫부분에 x,y 타일 카운트를 읽은 후
	그 만큼 CreateTile을 해서 타일을 만들어 둔다.
	그룹타입 타일인 벡터를 가져와
	벡터 사이즈만큼 반복문을 돌리면서
	모든 타일에 개별로 Load함수를 사용한다

씬툴 cpp
	SetTileIdx()
	마우스 왼쪽버튼을 누른 타일의 정보를 
	x,y 계산해서 그룹타입 Tile에 있는 벡터의 인덱스로 환산한다.
	해당 타일을 찾아냈으면 타일cpp의 AddImgIdx를 실행한다
	(해당 함수는 타일 텍스쳐에서 인덱스를 다음번호로 바꾸는 역할)

	SaveTileDate()
	윈api ui를 사용한 파일저장 함수로
	저장시의 확장자 선택과 저장경로 등을 다룸
	만약GetSaveFileName(&ofn)) 이면 SaveTile(상대경로)	
	함수를 실행한다.


	SaveTile(파일경로)
	파일을 만들고, 씬의 타일개수를 가져와
	그 개수를 파일 앞부분에 적는다
	그리고 그 밑에다 그룹타입 Tile인 벡터의 사이즈만큼
	반복문을 돌면서 타일cpp의 Save함수를 실행

		
	LoadTileDate()
	윈api ui를 사용한 파일 불러오기 함수
	마지막에 GetOpenFileName(&ofn))이면 씬cpp의
	LoadTile함수를 실행한다.

	TileCountProc(윈도우핸들, message, wParam, lParam)
	맵의 타일 갯수를 지정해주는 Dialog메뉴를 열었을때
	여기에 입력한 param값들을 클래스 멤버변수인
	타일 x,y카운트에다 넣어준다.
	그리고 x,y,로 이중반복을 돌려 createTile 함수까지 실행



타일cpp에 Save와 Load 각각 1바이트씩 읽거나 쓰는 함수










0 3 





선택지1
	타일에 그룹네임만 바꾸고 거기다 네임주기
		속도 좀 느림, 구현 편함
	그라운드를 생성하고 네임주기
		속도 빠름, 구현 불편
		저장,불러오기 만들어야 하고 프리팹기능 만들어야함
		






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

맵툴 추가사항
	
	그라운드 저장기능(버그 있을 수 있음)
	bmp파일로 빼는 기능(불가능한듯)

	알파있는 텍스처들 인덱스 안잡히는 버그
	플레이어 픽셀 손보기
	타일 따오기
	백그라운드 움직이기






애니메이션툴 추가사항
	애니메이션 피벗
	텍스처 회전 plgblt?
	


오브젝트 두개가 겹쳐야함
무기 클래스에 플레이어를 포인터로 받고
플레이어 위치에 오프셋을 추가해서 위치를 지정(텍스처 있어야하고 회전도 가능해야함)


회전 알고리즘필요













애니메이션 만들기
1. 캔버스 사이즈를 정한다
2. 가운데 정렬을 한다
3. 빈공간을 채운다
4. 행열 맞추고 익스포트
















플레이어가 그라운드에 뛰어서 도착할때
벽 왼쪽에 부딫히면 그라운드 위로 올라와 버리는 버그
플레이어의 이전프레임 좌표의 y값을 기억해 놨다가 이 좌표가
그라운드의 윗벽보다 낮거나 높은지를 확인 혹은

플레이어의 이전프레임 좌표의 y와 현재프레임의 y를 비교

공중에서 좌우키 누르면 워크상태


맵그리다가 생선텍스처로 바꾸고 생선눌렀을때 이미지 범위를 넘어섰다는
CTile.cpp 에서 어설트가 걸림








갈고리 발사 당시에 로테이션 방향으로 갈고리가 발사되서
일반 그라운드면 그 로테이션 그대로 고정
만약 플레이어가 땅과 부딫힐 경우 갈고리가 회수되고
체인도 사라짐, 플레이어 상태도 변환

플레이어가 갈고리를 쏘는 순간 플레이어 암과 갈고리 사이에 체인이 보여짐




핵심은 arm 클래스 하나 만들어서 
거기서 상태머신으로 애니메이션 관리하다가
마우스 클릭이 발생했을때나 스윙 상태일때
로테이션을 바꿔주고

마우스 클릭때 갈고리를 발사해서 회수하는 모션까지,
갈고리 발사 후에는 갈고리가 벽에 닿으면 로테이션 유지한 채로 그대로 고정
그리고 체인생성해서 arm이랑 갈고리 사이를 연결
갈고리 발사후에 벽에 안닿으면 갈고리를 회수하고 회수가 다 되었을 경우 삭제



해야될 일은
2. arm클래스 만들고 애니메이션 상태머신 구현

0. 타이틀씬
3. 간이맵 만들기

5. 갈고리 클래스와 chain 작업 후 와이어 구현
6. 튜토맵 혹은 전투맵 구현
7. 한사이클 보여줄수있게 정리
8. 몬스터 만들기
9. 전투구현
10. 트리거로 몬스터 소환 및 맵에디터
11. 한사이클 정리
 
토까지 갈고리


갈고리는 벽에 부딫히면 arm 자리에서 발사
 벽에 닿으면 부딪치거나 되돌아옴
arm은 발사된 방향으로 로테이션이 돌음
플레이어는 갈고리 발사거리만큼의 레이를 쐈을때 첫번째 벽에
유효한 콜라이더가 있을 경우 플레이어와 해당 벽 사이에 거리를 계산하고
이 때 와이어최대길이보다 그 길이가 길 경우에는 와이어최대거리가 될때까지
그 방향으로 즉시 이동한 후 와이어를 고정하고
짧은 경우 이동하지 않고 와이어를 고정

그 후에 무게중심을 갈고리로 이동시킨다



이때 플레이어의 방향을 와이어 발사 당시 플레이어 위치와 갈고리 도착위치를
고려해서 방향을 바꿔주고 ad로 움직일때는 갈고리 도착위치에서 
(무게중심 이동은 플레이어의 이동반경을 대체로 갈고리를 중심으로,
와이어 길이를 반지름으로 하는 원의 겉면으로 설정하고,
플레이어가 그라운드에 닿지 않는한 ad를 누르면 
플레이어의 방향과 갈고리의 위치에 따라
원의 겉면으로 힘을 줌 


갈고리의 y값과 플레이어 y값을 비교해서
플레이어가 밑에 있으면 중력을 안받고(?) 갈고리 기준 와이어길이 반지름으로 하는
호를 따라 현재 파워(이동량?)수치 만큼 갈고리 밑 수직인 호를 기준으로
좌우를 반동한다 이 때 파워를 떨어트려야 하는데
1.처음 2초간은 빠르게 줄이다 그 다음부터는 조금씩 줄인다.
2. 좌우 반동할때마다 줄이는 방식으로 하고 처음 2번만 크게 줄인다.


갈고리보다 플레이어의 y값이 위에 있으면 중력의 영향을 받게된다.
그리고 체인은 갈고리와 플레이어 사이에 포물선을 그리며 떨어지게끔 연출

갈고리를 걸때 플레이어 좌표와 갈고리의 x값이 차이가 날 수록 더
강한 힘으로 파워를 주며 시작

플레이어가 6시방향을 기준으로 좌우 45도각도 까지는 몸을 옆으로 돌리는 모션
45도 이상은 roll하는 모션


	공중에서 와이어를 쐈을때
좌우에 쏘면 일반 표준만큼 와이어가 고정되고 그대로 중력을 따라
와이어쪽으로 떨어지다



와이어 특이사항



와이어를 붙잡은채 계속 있을경우 처음 2번정도 진자운동 할때는 힘이 팍팍 떨어지고
그 후부터는 아주 조금씩 떨어진다.








플레이어가 바닥에 있는 상태에서의 와이어 발사

-위쪽에 와이어를 쏘면
와이어가 살짝 당겨져서 플레이어가 바닥에 닿지 않게된다.
 
- 벽 좌우면쪽에 와이어를 쏘면 

플레이어 키보다 낮은벽에 와이어를 쏠 경우 
그냥 와이어만 박히고 그 길이가 고정된다.

만약 와이어 최대걸이보다 길었을 경우 플레이어 땅기고 다시 재판정

플레이어 키보다 높은벽에 와이어를 쏠 경우
플레이어를 와이어 밑까지 당기고 당겨진 위치에서 와이어 고정 이떄
와이어등반 기능 on


땅밑에다 와이어 꽂으면 그냥 와이어만 박히고 길이 고정



벽타다가 땅위로 올라갈때 w와 좌우키를 동시에 누르면 버그생김
조작불능 혹은 rowJump같은 상태를 만들어서 
이 상태에서는 좌우 방향키를 안먹게끔 한 다음
0.5초후에 일반점프등으로 바꿔주는 방식을 취할 수 있음


타이틀씬
백그라운드
버튼 두개




후크 애니메이션 및 플레이어 와이어액션
